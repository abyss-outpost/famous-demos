Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=Array.prototype.slice.call(arguments,1),e=this,n=function(){},s=function(){return e.apply(this instanceof n&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(+new Date)},1e3/60)}),"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var i="classList",e="prototype",n=(t.HTMLElement||t.Element)[e],s=Object,o=String[e].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[e].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1},h=function(t,i){this.name=t,this.code=DOMException[t],this.message=i},a=function(t,i){if(""===i)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(i))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,i)},u=function(t){for(var i=o.call(t.className),e=i?i.split(/\s+/):[],n=0,s=e.length;s>n;n++)this.push(e[n]);this._updateClassName=function(){t.className=""+this}},p=u[e]=[],c=function(){return new u(this)};if(h[e]=Error[e],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",-1!==a(this,t)},p.add=function(t){t+="",-1===a(this,t)&&(this.push(t),this._updateClassName())},p.remove=function(t){t+="";var i=a(this,t);-1!==i&&(this.splice(i,1),this._updateClassName())},p.toggle=function(t){t+="",-1===a(this,t)?this.add(t):this.remove(t)},p.toString=function(){return this.join(" ")},s.defineProperty){var l={get:c,enumerable:!0,configurable:!0};try{s.defineProperty(n,i,l)}catch(d){-2146823252===d.number&&(l.enumerable=!1,s.defineProperty(n,i,l))}}else s[e].__defineGetter__&&n.__defineGetter__(i,c)}(self),function(){var t,i,e;!function(n){function s(t,i){var e,n,s,o,r,h,a,u,p,c,l=i&&i.split("/"),d=g.map,f=d&&d["*"]||{};if(t&&"."===t.charAt(0)&&i){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),u=0;u<t.length;u+=1)if(c=t[u],"."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((l||f)&&d){for(e=t.split("/"),u=e.length;u>0;u-=1){if(n=e.slice(0,u).join("/"),l)for(p=l.length;p>0;p-=1)if(s=d[l.slice(0,p).join("/")],s&&(s=s[n])){o=s,r=u;break}if(o)break;!h&&f&&f[n]&&(h=f[n],a=u)}!o&&h&&(o=h,r=a),o&&(e.splice(0,r,o),t=e.join("/"))}return t}function o(t,i){return function(){return l.apply(n,_.call(arguments,0).concat([t,i]))}}function r(t){return function(i){return s(i,t)}}function h(t){return function(i){v[t]=i}}function a(t){if(y.hasOwnProperty(t)){var i=y[t];delete y[t],m[t]=!0,c.apply(n,i)}if(!v.hasOwnProperty(t)&&!m.hasOwnProperty(t))throw Error("No "+t);return v[t]}function u(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function p(t){return function(){return g&&g.config&&g.config[t]||{}}}var c,l,d,f,v={},y={},g={},m={},_=[].slice;d=function(t,i){var e,n=u(t),o=n[0];return t=n[1],o&&(o=s(o,i),e=a(o)),o?t=e&&e.normalize?e.normalize(t,r(i)):s(t,i):(t=s(t,i),n=u(t),o=n[0],t=n[1],o&&(e=a(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:e}},f={require:function(t){return o(t)},exports:function(t){var i=v[t];return void 0!==i?i:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:p(t)}}},c=function(t,i,e,s){var r,u,p,c,l,g,_=[];if(s=s||t,"function"==typeof e){for(i=!i.length&&e.length?["require","exports","module"]:i,l=0;l<i.length;l+=1)if(c=d(i[l],s),u=c.f,"require"===u)_[l]=f.require(t);else if("exports"===u)_[l]=f.exports(t),g=!0;else if("module"===u)r=_[l]=f.module(t);else if(v.hasOwnProperty(u)||y.hasOwnProperty(u)||m.hasOwnProperty(u))_[l]=a(u);else{if(!c.p)throw Error(t+" missing "+u);c.p.load(c.n,o(s,!0),h(u),{}),_[l]=v[u]}p=e.apply(v[t],_),t&&(r&&r.exports!==n&&r.exports!==v[t]?v[t]=r.exports:p===n&&g||(v[t]=p))}else t&&(v[t]=e)},t=i=l=function(t,i,e,s,o){return"string"==typeof t?f[t]?f[t](i):a(d(t,i).f):(t.splice||(g=t,i.splice?(t=i,i=e,e=null):t=n),i=i||function(){},"function"==typeof e&&(e=s,s=o),s?c(n,t,i,e):setTimeout(function(){c(n,t,i,e)},15),l)},l.config=function(t){return g=t,l},e=function(t,i,e){i.splice||(e=i,i=[]),y[t]=[t,i,e]},e.amd={jQuery:!0}}(),e("5q/kh",function(){}),e("5e/hf",["require","exports","module"],function(t,i,e){function n(t){var i=r.length;return o(i,t),i}function s(t){return r[t]}function o(t,i){r[t]=i}var r=[];e.exports={register:n,get:s,set:o}}),e("5e/hk",["require","exports","module"],function(t,i,e){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function t(i,e){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return n[0]=i[0]*e[0]+i[4]*e[1]+i[8]*e[2]+i[12]*e[3],n[1]=i[1]*e[0]+i[5]*e[1]+i[9]*e[2]+i[13]*e[3],n[2]=i[2]*e[0]+i[6]*e[1]+i[10]*e[2]+i[14]*e[3],n[3]=i[3]*e[0]+i[7]*e[1]+i[11]*e[2]+i[15]*e[3],n[4]=i[0]*e[4]+i[4]*e[5]+i[8]*e[6]+i[12]*e[7],n[5]=i[1]*e[4]+i[5]*e[5]+i[9]*e[6]+i[13]*e[7],n[6]=i[2]*e[4]+i[6]*e[5]+i[10]*e[6]+i[14]*e[7],n[7]=i[3]*e[4]+i[7]*e[5]+i[11]*e[6]+i[15]*e[7],n[8]=i[0]*e[8]+i[4]*e[9]+i[8]*e[10]+i[12]*e[11],n[9]=i[1]*e[8]+i[5]*e[9]+i[9]*e[10]+i[13]*e[11],n[10]=i[2]*e[8]+i[6]*e[9]+i[10]*e[10]+i[14]*e[11],n[11]=i[3]*e[8]+i[7]*e[9]+i[11]*e[10]+i[15]*e[11],n[12]=i[0]*e[12]+i[4]*e[13]+i[8]*e[14]+i[12]*e[15],n[13]=i[1]*e[12]+i[5]*e[13]+i[9]*e[14]+i[13]*e[15],n[14]=i[2]*e[12]+i[6]*e[13]+i[10]*e[14]+i[14]*e[15],n[15]=i[3]*e[12]+i[7]*e[13]+i[11]*e[14]+i[15]*e[15],arguments.length<=2?n:t.apply(null,[n].concat(Array.prototype.slice.call(arguments,2)))},r.multiply=function t(i,e){if(!i||!e)return i||e;var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return n[0]=i[0]*e[0]+i[4]*e[1]+i[8]*e[2],n[1]=i[1]*e[0]+i[5]*e[1]+i[9]*e[2],n[2]=i[2]*e[0]+i[6]*e[1]+i[10]*e[2],n[4]=i[0]*e[4]+i[4]*e[5]+i[8]*e[6],n[5]=i[1]*e[4]+i[5]*e[5]+i[9]*e[6],n[6]=i[2]*e[4]+i[6]*e[5]+i[10]*e[6],n[8]=i[0]*e[8]+i[4]*e[9]+i[8]*e[10],n[9]=i[1]*e[8]+i[5]*e[9]+i[9]*e[10],n[10]=i[2]*e[8]+i[6]*e[9]+i[10]*e[10],n[12]=i[0]*e[12]+i[4]*e[13]+i[8]*e[14]+i[12],n[13]=i[1]*e[12]+i[5]*e[13]+i[9]*e[14]+i[13],n[14]=i[2]*e[12]+i[6]*e[13]+i[10]*e[14]+i[14],arguments.length<=2?n:t.apply(null,[n].concat(Array.prototype.slice.call(arguments,2)))},r.move=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},r.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],s=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return r.move(i,[e,n,s])},r.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},r.scale=function(t,i,e){return void 0===e&&(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},r.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},r.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},r.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,i,e){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(i),r=Math.sin(i),h=Math.cos(e),a=Math.sin(e),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return u[0]=o*h,u[1]=n*a+s*r*h,u[2]=s*a-n*r*h,u[4]=-o*a,u[5]=n*h-s*r*a,u[6]=s*h+n*r*a,u[8]=r,u[9]=-s*o,u[10]=n*o,u},r.rotateAxis=function(t,i){var e=Math.sin(i),n=Math.cos(i),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,h=t[0]*t[2]*s,a=t[1]*t[1]*s,u=t[1]*t[2]*s,p=t[2]*t[2]*s,c=t[0]*e,l=t[1]*e,d=t[2]*e,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return f[0]=o+n,f[1]=r+d,f[2]=h-l,f[4]=r-d,f[5]=a+n,f[6]=u+c,f[8]=h+l,f[9]=u-c,f[10]=p+n,f},r.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),n=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),s=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return r.move(i,[e,n,s])},r.formatCSS=function(t){for(var i=t.slice(0),e=0;e<i.length;e++)i[e]<1e-6&&i[e]>-1e-6&&(i[e]=0);return"matrix3d("+i.join()+")"},r.skew=function(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],e=t[5]*t[10]-t[6]*t[9],n=t[4]*t[10]-t[6]*t[8],s=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],h=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],p=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*n+t[2]*s,l=1/c;return i[0]=l*e,i[1]=-l*o,i[2]=l*a,i[4]=-l*n,i[5]=l*r,i[6]=-l*u,i[8]=l*s,i[9]=-l*h,i[10]=l*p,i[12]=-t[12]*i[0]-t[13]*i[4]-t[14]*i[8],i[13]=-t[12]*i[1]-t[13]*i[5]-t[14]*i[9],i[14]=-t[12]*i[2]-t[13]*i[6]-t[14]*i[10],i},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var i=[t[0],t[1],t[2]],e=o(i[0]),h=s(i),a=[i[0]+e*h,i[1],i[2]],u=2/n(a);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-u*a[0]*a[0],p[5]=1-u*a[1]*a[1],p[10]=1-u*a[2]*a[2],p[1]=-u*a[0]*a[1],p[2]=-u*a[0]*a[2],p[6]=-u*a[1]*a[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var c=r.multiply(p,t),l=[c[5],c[6]],d=o(l[0]),f=s(l),v=[l[0]+d*f,l[1]],y=2/n(v),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*v[0]*v[0],g[10]=1-y*v[1]*v[1],g[6]=-y*v[0]*v[1],g[9]=g[6];var m=r.multiply(g,p),_=r.multiply(m,t),x=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,x),m=r.multiply(x,m);var I={};return I.translate=r.getTranslate(t),I.rotate=[Math.atan2(-m[6],m[10]),Math.asin(m[2]),Math.atan2(-m[1],m[0])],I.rotate[0]||(I.rotate[0]=0,I.rotate[2]=Math.atan2(m[4],m[5])),I.scale=[_[0],_[5],_[10]],I.skew=[Math.atan2(_[9],I.scale[2]),Math.atan2(_[8],I.scale[2]),Math.atan2(_[4],I.scale[0])],Math.abs(I.rotate[0])+Math.abs(I.rotate[2])>1.5*Math.PI&&(I.rotate[1]=Math.PI-I.rotate[1],I.rotate[1]>Math.PI&&(I.rotate[1]-=2*Math.PI),I.rotate[1]<-Math.PI&&(I.rotate[1]+=2*Math.PI),I.rotate[0]<0?I.rotate[0]+=Math.PI:I.rotate[0]-=Math.PI,I.rotate[2]<0?I.rotate[2]+=Math.PI:I.rotate[2]-=Math.PI),I},r.average=function(t,i,e){e=void 0===e?.5:e;for(var n=r.interpret(t),s=r.interpret(i),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},h=0;3>h;h++)o.translate[h]=(1-e)*n.translate[h]+e*s.translate[h],o.rotate[h]=(1-e)*n.rotate[h]+e*s.rotate[h],o.scale[h]=(1-e)*n.scale[h]+e*s.scale[h],o.skew[h]=(1-e)*n.skew[h]+e*s.skew[h];return r.build(o)},r.build=function(t){var i=r.scale(t.scale[0],t.scale[1],t.scale[2]),e=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.move(r.multiply(n,e,i),t.translate)},r.equals=function(t,i){if(t===i)return!0;if(!t||!i)return!1;for(var e=0;e<t.length;e++)if(t[e]!=i[e])return!1;return!0},r.normalizeRotation=function(t){var i=t.slice(0);for((i[0]==Math.PI/2||i[0]==-Math.PI/2)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>Math.PI/2&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<-Math.PI/2&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},e.exports=r}),e("5e/hr",["require","exports","module","./hk"],function(t,i,e){function n(){this.reset()}function s(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=t("./hk");n.parse=function(t,i){var e=new n,s=e.parse(t);return i?(i(s),void 0):s},n.prototype.parse=function(t){return this.reset(),this._parseSpec(t,o.identity,1,[0,0],void 0,o.identity),this.result},n.prototype.reset=function(){this.result={}},n.prototype._parseSpec=function(t,i,e,n,r,h){if(void 0===t);else if("number"==typeof t){var a=t,u=r?[n[0]*r[0],n[1]*r[1],0]:[0,0,0];this.result[a]=[o.move(i,s(u,h)),e,n,r]}else if(t instanceof Array)for(var p=0;p<t.length;p++)this._parseSpec(t[p],i,e,n,r,h);else if(void 0!==t.target){var c=t.target,l=i,d=e,f=n,v=r;void 0!==t.opacity&&(d=e*t.opacity),t.transform&&(l=o.multiply(i,t.transform)),t.origin&&(f=t.origin),t.size&&(v=t.size,r&&f&&(v=[t.size[0]||r[0],t.size[1]||r[1]],l=o.move(l,s([f[0]*r[0],f[1]*r[1],0],h)),l=o.moveThen([-f[0]*v[0],-f[1]*v[1],0],l)),h=i,f=[0,0]),this._parseSpec(c,l,d,f,v,h)}},e.exports=n}),e("5e/hp",["require","exports","module","./hf","./hr","./hk"],function(t,i,e){function n(t){this.modifiers=[],this.object=void 0,t&&this.set(t),this._hasCached=!1,this._resultCache={},this._prevResults={},this._objectsAdded=!1,this._beenUsed=!1}function s(t,i,e){var n=r.parse(t);for(var h in n){var a=o.get(h),u=n[h];u.unshift(i);var p=a.commit.apply(a,u);p?s(p,i,e):e[h]=u}}var o=t("./hf"),r=t("./hr");t("./hk"),n.prototype.get=function(){return this.object},n.prototype.set=function(t){this.object=t},n.prototype.link=function(t){if(this._objectsAdded)throw"RenderNode: Illegal usage of link() after add()";if(this._beenUsed)throw"RenderNode: Undefined behavior: link() called after setup; use set() instead";if(t instanceof Array)this.set(t);else{var i=this.get();i?i instanceof Array?this.modifiers.unshift(t):(this.modifiers.unshift(i),this.set(t)):this.set(t)}return this},n.prototype.add=function(t){if(this._beenUsed)throw"RenderNode: Potential abstraction violation: add() called after setup; use collection view instead";this._objectsAdded=!0,this.get()instanceof Array||this.set([]);var i=new n(t);return this.get().push(i),i},n.prototype.commit=function(t,i,e,n,r){var h=this.render(void 0,this._hasCached);if(h!==!0){for(var a in this._prevResults)if(!(a in this._resultCache)){var u=o.get(a);u.cleanup&&u.cleanup(t.getAllocator())}this._prevResults=this._resultCache,this._resultCache={},s({transform:i,size:r,origin:n,opacity:e,target:h},t,this._resultCache),this._hasCached=!0}},n.prototype.render=function(t){if(!this._beenUsed&&(this._beenUsed=!0,this._objectsAdded&&1===this.get().length))throw"RenderNode: single item in object array; potential misuse of add()?";var i=t,e=this.get();if(e)if(e.render)i=e.render(t);else{var n=e.length-1;for(i=Array(n);n>=0;)i[n]=e[n].render(),n--}for(var s=this.modifiers.length,n=0;s>n;n++)i=this.modifiers[n].render(i);return i},e.exports=n}),e("5e/hh",["require","exports","module"],function(t,i,e){function n(){this.listeners={},this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={},this.owner=this}function s(t,i){for(var e=!1,n=0;n<this.downstream.length;n++)e=this.downstream[n].emit(t,i)||e;for(var n=0;n<this.downstreamFn.length;n++)e=this.downstreamFn[n](t,i)||e;return e}n.prototype.emit=function(t,i){i||(i={});var e=this.listeners[t],n=!1;if(e)for(var o=0;o<e.length;o++)e[o].call(this.owner,i)&&(n=!0);return s.call(this,t,i)||n},n.prototype.on=function(t,i){if(!(t in this.listeners)){this.listeners[t]=[];var e=this.emit.bind(this,t);this.upstreamListeners[t]=e;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,e)}var s=this.listeners[t].indexOf(i);return 0>s&&this.listeners[t].push(i),this},n.prototype.unbind=function(t,i){var e=this.listeners[t].indexOf(i);e>=0&&this.listeners[t].splice(e,1)},n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe"):t.emit&&t.emit("pipe"),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe"):t.emit&&t.emit("unpipe"),t):!1},n.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},n.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.unbind(e,this.upstreamListeners[e])}return this},n.prototype.bindThis=function(t){this.owner=t},n.setInputHandler=function(t,i){t.emit=i.emit.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},n.setOutputHandler=function(t,i){i instanceof n&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.unbind=i.unbind.bind(i)},e.exports=n}),e("5e/hd",["require","exports","module"],function(t,i,e){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},n.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},e.exports=n}),e("5e/hw",["require","exports","module"],function(t,i,e){var n={};n.Curve={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.Direction={X:0,Y:1,Z:2},n.Origin={tl:[0,0],t:[.5,0],tr:[1,0],l:[0,.5],c:[.5,.5],r:[1,.5],bl:[0,1],b:[.5,1],br:[1,1]},n.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},n.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},n.transformInFrontMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],n.transformInFront={render:function(t){return{transform:n.transformInFrontMatrix,target:t}}},n.transformBehindMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],n.transformBehind={render:function(t){return{transform:n.transformBehindMatrix,target:t}}},n.customizeComponent=function(t,i,e){var n=function(n){t.call(this,i),n&&this.setOptions(n),e&&e.call(this)};return n.prototype=Object.create(t.prototype),n},n.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},e.exports=n}),e("5e/hm",["require","exports","module","./hw"],function(t,i,e){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("./hw");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,i,e){for(var n=s.after(t.length,e),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],i,n)},n.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},e.exports=n}),e("5e/hv",["require","exports","module","./hw"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,i,e){return(1-e)*t+e*i}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=n.getCurve(e.curve)),e}function h(t,i,e,n,s){var o,r=1e-7,h=(e(s)-e(s-r))/r;if(t instanceof Array){o=[];for(var a=0;a<t.length;a++)o[a]=h*(t[a]-i[a])/n}else o=h*(t-i)/n;return o}function a(t,i,e){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]=s(t[o],i[o],e)}else n=s(t,i,e);return n}var u=t("./hw");n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:u.Curve.linear,duration:500,speed:0};var p={};n.registerCurve=function(t,i){return p[t]?!1:(p[t]=i,!0)},n.unregisterCurve=function(t){return p[t]?(delete p[t],!0):!1},n.getCurve=function(t){return p[t]},n.getCurves=function(){return p},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),void 0;if(this._startValue=o(this.get()),i=r(i,this.options),i.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var h in n)s+=(t[h]-n[h])*(t[h]-n[h]);i.duration=Math.sqrt(s)/i.speed}else i.duration=Math.abs(t-n)/i.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},n.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=o(t),this.velocity=o(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=h(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=a(this._startValue,this._endValue,this._curve(e)),this.velocity=h(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",u.Curve.linear),n.registerCurve("easeIn",u.Curve.easeIn),n.registerCurve("easeOut",u.Curve.easeOut),n.registerCurve("easeInOut",u.Curve.easeInOut),n.registerCurve("easeOutBounce",u.Curve.easeOutBounce),n.registerCurve("spring",u.Curve.spring),n.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},e.exports=n}),e("5e/hu",["require","exports","module","./hw","./hm","./hv"],function(t,i,e){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return this.set(this.get()),void 0;this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(i=n.method,"string"==typeof i&&(i=h[i])):i=r,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new o(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(e,n,s.bind(this))}t("./hw");var o=t("./hm"),r=t("./hv"),h={};n.registerMethod=function(t,i){return t in h?!1:(h[t]=i,!0)},n.unregisterMethod=function(t){return t in h?(delete h[t],!0):!1},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var n=[t,i];return this.actionQueue.push(n),this.callbackQueue.push(e),this.currentAction||s.call(this),this},n.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,i){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},i)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},e.exports=n}),e("5e/hc",["require","exports","module","./hp","./hh","./hr","./hd","./hk","./hu"],function(t,i,e){function n(t){this.container=t,this.allocator=new h(t),this.srcNode=new o,this.eventHandler=new r,this._size=s(this.container),this.perspectiveState=new u(0),this._perspective=void 0,this.eventHandler.on("resize",function(){this._size=s(this.container)}.bind(this))}function s(t){return[t.clientWidth,t.clientHeight]}var o=t("./hp"),r=t("./hh");t("./hr");var h=t("./hd"),a=t("./hk"),u=t("./hu");n.prototype.getAllocator=function(){return this.allocator},n.prototype.link=function(t){return this.srcNode.link(t)},n.prototype.add=function(t){return this.srcNode.add(t)},n.prototype.mod=function(t){return this.srcNode.mod(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this.allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=s(this.container)),this._size=t},n.prototype.update=function(){var t=this.perspectiveState.get();t!==this._perspective&&(this.container.style.perspective=t?t.toFixed()+"px":"",this.container.style.webkitPerspective=t?t.toFixed():"",this._perspective=t),this.srcNode&&this.srcNode.commit(this,a.identity,1,[0,0],this._size)},n.prototype.getPerspective=function(){return this.perspectiveState.get()},n.prototype.setPerspective=function(t,i,e){return this.perspectiveState.set(t,i,e)},n.prototype.emit=function(t,i){return this.eventHandler.emit(t,i)},n.prototype.on=function(t,i){return this.eventHandler.on(t,i)},n.prototype.unbind=function(t,i){return this.eventHandler.unbind(t,i)},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},e.exports=n}),e("5e/hn",["require","exports","module","./hh"],function(t,i,e){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./hh");n.patch=function(t){for(var i=new n(t),e=1;e<arguments.length;e++)i.patch(arguments[e]);return t},n.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e)n in t&&e[n].constructor===Object&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(e[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,e[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var i=new n(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.unbind=function(){return s.call(this),this.unbind.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=n}),e("5e/he",["require","exports","module","./hc","./hh","./hn"],function(t,i,e){function n(){m.runLoop?(a.step(),requestAnimationFrame(n)):v=!1}function s(t){if(document.activeElement&&"INPUT"==document.activeElement.nodeName)return document.activeElement.addEventListener("blur",function i(){this.removeEventListener("blur",i),s(t)}),void 0;window.scrollTo(0,0);for(var i=0;i<u.length;i++)u[i].emit("resize");g.emit("resize")}var o=t("./hc"),r=t("./hh"),h=t("./hn"),a={},u=[],p=[],c=[],l=Date.now(),d=void 0,f=void 0,v=!0,y={},g=new r,m={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new h(m);_.on("change",function(t){"fpsCap"===t.id?setFPSCap(t.value):"runLoop"===t.id&&!v&&t.value&&(v=!0,requestAnimationFrame(n))});var x=10;a.step=function(){var t=Date.now();if(!(f&&f>t-l)){d=t-l,l=t,g.emit("prerender");for(var i=0;i<p.length;i++)p[i].call(this);for(p.splice(0);c.length&&Date.now()-t<x;)c.shift().call(this);for(var i=0;i<u.length;i++)u[i].update();g.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!1),a.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(a):g.pipe(t)},a.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(a):g.unpipe(t)},a.on=function(t,i){return t in y||(y[t]=g.emit.bind(g,t),document.body.addEventListener(t,y[t])),g.on(t,i)},a.emit=function(t,i){return g.emit(t,i)},a.unbind=function(t,i){return g.unbind(t,i)},a.getFPS=function(){return 1e3/d},a.setFPSCap=function(t){f=Math.floor(1e3/t)},a.getOptions=function(){return _.getOptions.apply(_,arguments)},a.setOptions=function(){return _.setOptions.apply(_,arguments)},a.createContext=function(t){void 0===t?(t=document.createElement(m.containerType),t.classList.add(m.containerClass),document.body.appendChild(t)):t instanceof Element||(t=document.createElement(m.containerType),console.warn("Tried to create context on non-existent element"));var i=new o(t);return a.registerContext(i),i},a.registerContext=function(t){return u.push(t),t},a.nextTick=function(t){p.push(t)},a.defer=function(t){c.push(t)},e.exports=a}),e("5l/i5",["require","exports","module"],function(t,i,e){function n(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}var s=new n(0,0,0);n.prototype.add=function(t,i){return i=i||s,i.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},n.prototype.sub=function(t,i){return i=i||s,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t,i){return i=i||s,i.setXYZ(t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t,i){return this.mult(1/t,i)},n.prototype.cross=function(t,i){return i=i||s,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},n.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.rotateX=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(e,-o*h+n*r,o*r-n*h)},n.prototype.rotateY=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(-o*h+e*r,n,o*r+e*h)},n.prototype.rotateZ=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(-n*h+e*r,n*r+e*h,o)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t,i){t=void 0!==t?t:1,i=i||s;var e=1e-7,n=this.norm();return Math.abs(n)>e?this.mult(t/n,i):i.setXYZ(t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?(this.x=t[0],this.y=t[1],this.z=t[2]||0):(this.x=t.x,this.y=t.y,this.z=t.z||0),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.setXYZ=function(t,i,e){return s.clear(),this.x=t,this.y=i,this.z=e,this
},n.prototype.clear=function(){this.x=0,this.y=0,this.z=0},n.prototype.cap=function(t,i){if(i=i||s,1/0===t)return i;var e=this.norm();return e>t&&this.normalize().mult(t,i),i},n.prototype.project=function(t,i){return i=i||s,t.mult(this.dot(t),i)},n.prototype.reflectAcross=function(t,i){return i=i||s,t.normalize(),this.sub(this.project(t).mult(2),i)},n.prototype.toArray=function(){return[this.x,this.y,this.z]},n.prototype.get=function(){return this.toArray()},e.exports=n}),e("5h/ic",["require","exports","module","5e/hp","5l/i5","5e/hk"],function(t,i,e){function n(t){t=t||{},this.p=t.p?new o(t.p):new o(0,0,0),this.v=t.v?new o(t.v):new o(0,0,0),this.f=t.f?new o(t.f):new o(0,0,0),this.m=void 0!==t.m?t.m:1,this.restitution=void 0!==t.restitution?t.restitution:.5,this.dissipation=void 0!==t.dissipation?t.dissipation:0,this.axis=void 0!==t.axis?t.axis:void 0,this.setImmunity(t.immunity||n.IMMUNITIES.NONE),this.mInv=1/this.m,this.size=[0,0,0],this.node=void 0,this.spec={size:[0,0],target:{origin:[.5,.5],transform:void 0,target:void 0}}}var s=t("5e/hp"),o=t("5l/i5"),r=t("5e/hk");n.AXIS={X:1,Y:2,Z:4},n.IMMUNITIES={NONE:0,POSITION:1,VELOCITY:2,ROTATION:4,AGENTS:8,UPDATE:16};for(var h in n.IMMUNITIES)n.IMMUNITIES.ALL|=n.IMMUNITIES[h];n.prototype.setPos=function(t){this.p.set(t)},n.prototype.getPos=function(){return this.p.get()},n.prototype.setVel=function(t){this.hasImmunity(n.IMMUNITIES.VELOCITY)||this.v.set(t)},n.prototype.getVel=function(){return this.v.get()},n.prototype.setMass=function(t){this.m=t,this.mInv=1/t},n.prototype.getMass=function(){return this.m},n.prototype.addImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity|=t},n.prototype.removeImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity&=~t},n.prototype.setImmunity=function(t){"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.immunity=t},n.prototype.hasImmunity=function(t){return"string"==typeof t&&(t=n.IMMUNITIES[t.toUpperCase()]),this.getImmunity()&t},n.prototype.getImmunity=function(){return this.immunity},n.prototype.reset=function(t,i){t=t||[0,0,0],i=i||[0,0,0],this.setPos(t),this.setVel(i)},n.prototype.applyForce=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.f.add(t,this.f)},n.prototype.applyImpulse=function(t){this.hasImmunity(n.IMMUNITIES.AGENTS)||this.setVel(this.v.add(t.mult(this.mInv)))},n.prototype.getEnergy=function(){return.5*this.m*this.v.normSquared()},n.prototype.getTransform=function(){var t=this.p,i=this.axis;return void 0!==i&&(i&~n.AXIS.X&&(t.x=0),i&~n.AXIS.Y&&(t.y=0),i&~n.AXIS.Z&&(t.z=0)),r.translate(t.x,t.y,t.z)},n.prototype.link=function(t){return this.node||(this.node=new s),this.node.link(t)},n.prototype.add=function(t){return this.node||(this.node=new s),this.node.add(t)},n.prototype.replace=function(t){this.node.object=t},n.prototype.render=function(t){return t=void 0!==t?t:this.node.render(),this.spec.target.transform=this.getTransform(),this.spec.target.target=t,this.spec},e.exports=n}),e("5l/i2",["require","exports","module"],function(t,i,e){function n(t,i,e,n){return 1==arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=i||0,this.y=e||0,this.z=n||0),this}var s=new n(1,0,0,0);n.prototype.add=function(t,i){return i=i||s,i.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t,i){return i=i||s,i.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scalarDivide=function(t,i){return i=i||s,this.scalarMult(1/t,i)},n.prototype.scalarMult=function(t,i){return i=i||s,i.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},n.prototype.multiply=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=this.w,h=t.x,a=t.y,u=t.z,p=t.w;return i.setWXYZ(r*p-e*h-n*a-o*u,r*h+e*p+n*u-o*a,r*a-e*u+n*p+o*h,r*u+e*a-n*h+o*p)},n.prototype.inverse=function(t){return t=t||s,this.conj().scalarDivide(this.normSquared(),t)},n.prototype.negate=function(t){return t=t||s,this.scalarMult(-1,t)},n.prototype.conj=function(t){return t=t||s,t.setWXYZ(this.w,-this.x,-this.y,-this.z)},n.prototype.normalize=function(t){t=t||s;var i=this.norm();return Math.abs(i)<1e-7?t.setWXYZ(1,0,0,0):this.scalarDivide(i,t)},n.prototype.makeFromAngleAndAxis=function(t,i){i.normalize(1,i);var e=.5*t,n=Math.sin(e);return this.x=n*i.x,this.y=n*i.y,this.z=n*i.z,this.w=Math.cos(e),this},n.prototype.getAngle=function(){return 2*Math.acos(this.w)},n.prototype.getAxis=function(){var t=this.w;if(t>=1)return[0,0,0];var i=1/Math.sqrt(1-t*t);return[i*this.x,i*this.y,this.z]},n.prototype.setWXYZ=function(t,i,e,n){return s.clear(),this.w=t,this.x=i,this.y=e,this.z=n,this},n.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.clone=function(){return new n(this)},n.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},n.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.isZero=function(){return!(this.x||this.y||this.z||1!=this.w)},n.prototype.zeroRotation=function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},n.prototype.getMatrix=function(){var t=1/this.norm(),i=this.x*t,e=this.y*t,n=this.z*t,s=this.w*t;return[1-2*e*e-2*n*n,-2*i*e-2*n*s,2*i*n-2*e*s,0,-2*i*e+2*n*s,1-2*i*i-2*n*n,-2*e*n-2*i*s,0,2*i*n+2*e*s,-2*e*n+2*i*s,1-2*i*i-2*e*e,0,0,0,0,1]};var o=1e-5;n.prototype.slerp=function(t,i,e){e=e||s;var n,r,h,a,u;return r=this.dot(t),0>r&&(r*=-1),1-r>o?(n=Math.acos(r),h=Math.sin(n),a=Math.sin((1-i)*n)/h,u=Math.sin(i*n)/h):(a=1-i,u=i),this.scalarMult(a/u).add(t).mult(u,e)},e.exports=n}),e("5h/ia",["require","exports","module","./ic","5l/i5","5l/i2","5e/hk"],function(t,i,e){function n(t){s.call(this,t),this.q=t.q?new r(t.q):new r,this.w=t.w?new o(t.w):new o,this.L=t.L?new o(t.L):new o,this.t=t.t?new o(t.t):new o,this.I=[1,0,0,1,0,0,1,0,0],this.Iinv=[1,0,0,1,0,0,1,0,0],this.w.w=0,this.pWorld=new o}var s=t("./ic"),o=t("5l/i5"),r=t("5l/i2"),h=t("5e/hk");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.IMMUNITIES=s.IMMUNITIES,n.prototype.updateAngularVelocity=function(){var t=this.Iinv,i=this.L,e=i.x,n=i.y,s=i.z,o=t[0],r=t[1],h=t[2];this.w.setXYZ(o[0]*e+o[1]*n+o[2]*s,r[0]*e+r[1]*n+r[2]*s,h[0]*e+h[1]*n+h[2]*s)},n.prototype.toWorldCoordinates=function(t){var i=this.q;return t.w=0,this.pWorld.set(i.inverse().multiply(t).multiply(i))},n.prototype.getEnergy=function(){var t=this.w,i=this.I,e=t.x,n=t.y,s=t.z,o=this.I[0],r=i[1],h=i[2];return.5*(this.m*this.v.normSquared()+o[0]*e*e+o[1]*e*n+o[2]*e*s+r[0]*n*e+r[1]*n*n+r[2]*n*s+h[0]*s*e+h[1]*s*n+h[2]*s*s)},n.prototype.reset=function(t,i,e,n){this.setPos(t||[0,0,0]),this.setVel(i||[0,0,0]),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(n||[0,0,0])},n.prototype.setOrientation=function(t){this.q.set(t)},n.prototype.setAngularMomentum=function(t){this.L.set(t)},n.prototype.applyForce=function(t,i){this.hasImmunity(n.IMMUNITIES.AGENTS)||(this.f.add(t,this.f),void 0!==i&&this.applyTorque(i.cross(t)))},n.prototype.applyTorque=function(t){this.hasImmunity(n.IMMUNITIES.ROTATION)||this.t.add(t,this.t)},n.prototype.getTransform=function(){return h.move(this.q.getMatrix(),this.p.get())},e.exports=n}),e("5h/ib",["require","exports","module","./ia"],function(t,i,e){function n(t){s.call(this,t),t=t||{},this.r=t.r||0,this.size=[2*this.r,2*this.r];var i=this.r,e=this.m;this.I=[[.25*e*i*i,0,0],[0,.25*e*i*i,0],[0,0,.5*e*i*i]],this.Iinv=[[4/(e*i*i),0,0],[0,4/(e*i*i),0],[0,0,2/(e*i*i)]]}var s=t("./ia");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n}),e("5h/id",["require","exports","module","./ia"],function(t,i,e){function n(t){s.call(this,t),t=t||{},this.size=t.size||[0,0];var i=this.size[0],e=this.size[1];this.I=[[e*e/12,0,0],[0,i*i/12,0],[0,0,(i*i+e*e)/12]],this.Iinv=[[12/(e*e),0,0],[0,12/(i*i),0],[0,0,12/(i*i+e*e)]]}var s=t("./ia");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n}),e("5l/vector",["require","exports","module"],function(t,i,e){function n(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}var s=new n(0,0,0);n.prototype.add=function(t,i){return i=i||s,i.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},n.prototype.sub=function(t,i){return i=i||s,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t,i){return i=i||s,i.setXYZ(t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t,i){return this.mult(1/t,i)},n.prototype.cross=function(t,i){return i=i||s,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},n.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},n.prototype.rotateX=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(e,-o*h+n*r,o*r-n*h)},n.prototype.rotateY=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(-o*h+e*r,n,o*r+e*h)},n.prototype.rotateZ=function(t,i){i=i||s;var e=this.x,n=this.y,o=this.z,r=Math.cos(t),h=Math.sin(t);return i.setXYZ(-n*h+e*r,n*r+e*h,o)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t,i){t=void 0!==t?t:1,i=i||s;var e=1e-7,n=this.norm();return Math.abs(n)>e?this.mult(t/n,i):i.setXYZ(t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?(this.x=t[0],this.y=t[1],this.z=t[2]||0):(this.x=t.x,this.y=t.y,this.z=t.z||0),this!==s&&s.clear(),this},n.prototype.put=function(t){t.set(s)},n.prototype.setXYZ=function(t,i,e){return s.clear(),this.x=t,this.y=i,this.z=e,this},n.prototype.clear=function(){this.x=0,this.y=0,this.z=0},n.prototype.cap=function(t,i){if(i=i||s,1/0===t)return i;var e=this.norm();return e>t&&this.normalize().mult(t,i),i},n.prototype.project=function(t,i){return i=i||s,t.mult(this.dot(t),i)},n.prototype.reflectAcross=function(t,i){return i=i||s,t.normalize(),this.sub(this.project(t).mult(2),i)},n.prototype.toArray=function(){return[this.x,this.y,this.z]},n.prototype.get=function(){return this.toArray()},e.exports=n}),e("5j/is",["require","exports","module","5l/vector"],function(t,i,e){function n(){this.force=new s}var s=t("5l/vector");n.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init&&t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},n.prototype.getEnergy=function(){return 0},e.exports=n}),e("5i/ig",["require","exports","module"],function(t,i,e){function n(){}n.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},n.prototype.applyConstraint=function(){},n.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init&&t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=n}),e("5k/iy",["require","exports","module"],function(t,i,e){function n(t){this.opts={velocityCap:1/0,angularVelocityCap:1/0},t&&this.setOpts(t)}n.prototype.integrateVelocity=function(t,i){var e=t.v,n=t.m,s=t.f;s.isZero()||(t.setVel(e.add(s.mult(i/n))),s.clear())},n.prototype.integratePosition=function(t,i){var e=t.p,n=t.v;n.isZero()||(n.cap(this.opts.velocityCap,n),t.setPos(e.add(n.mult(i))))},n.prototype.integrateAngularMomentum=function(t,i){var e=t.L,n=t.t;n.isZero()||(n.cap(this.opts.angularVelocityCap,n),e.add(n.mult(i),e),n.clear())},n.prototype.integrateOrientation=function(t,i){var e=t.q,n=t.w;n.isZero()||(e.add(e.multiply(n).scalarMult(.5*i),e),e.set(e.normalize()))},n.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=n}),e("5n/je",["require","exports","module","5h/ic","5h/ia","5h/ib","5h/id","5j/is","5i/ig","5k/iy"],function(t,i,e){function n(t){this.opts={speed:1,steps:1,velocityCap:1/0,angularVelocityCap:1/0,constraintSteps:1,constraintTolerance:1e-4},t&&this.setOpts(t),this._particles=[],this._agents={},this._forces=[],this._constraints=[],this._playing=!0,this._buffer=0,this._timestep=1e3/60/this.opts.steps,this._prevTime=void 0,this._currTime=void 0,this._integrator=new C({velocityCap:this.opts.velocityCap,angularVelocityCap:this.opts.angularVelocityCap}),this._currAgentId=0,this.BODIES=n.BODIES}function s(){return Date.now()}function o(t,i,e){return void 0===i&&(i=this.getParticles()),i instanceof Array||(i=[i]),this._agents[this._currAgentId]={agent:t,targets:i,source:e},r.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return t instanceof M?this._forces:t instanceof T?this._constraints:void 0}function h(t){return this._agents[t]}function a(t){var i=h.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function u(t,i){var e=this._agents[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function p(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t){var i=1/0,e=0;for(this.opts.constraintTolerance;e<this.opts.constraintSteps;){i=0;for(var n=this._constraints.length-1;n>-1;n--)i+=u.call(this,n,t);e++}}function l(t,i){t.hasImmunity(S.IMMUNITIES.UPDATE)||this._integrator.integrateVelocity(t,i)}function d(t){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof b&&t.updateAngularVelocity()}function f(t,i){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof b&&this._integrator.integrateAngularMomentum(t,i)}function v(t,i){t.hasImmunity(S.IMMUNITIES.UPDATE)||this._integrator.integratePosition(t,i)}function y(t,i){t.hasImmunity(S.IMMUNITIES.ROTATION)||t instanceof b&&this._integrator.integrateOrientation(t,i)}function g(t){this.forEachParticle(l,t)}function m(t){this.forEachParticle(v,t)}function _(){this.forEachParticle(d)}function x(t){this.forEachParticle(f,t)}function I(t){this.forEachParticle(y,t)}function w(t){p.call(this),g.call(this,t),x.call(this,t),_.call(this,t),c.call(this,t),m.call(this,t),I.call(this,t)}var S=t("5h/ic"),b=t("5h/ia"),O=t("5h/ib"),z=t("5h/id"),M=t("5j/is"),T=t("5i/ig"),C=t("5k/iy");n.BODIES={POINT:S,BODY:b,CIRCLE:O,RECTANGLE:z},n.prototype.setOpts=function(t){for(var i in t)this.opts[i]&&(this.opts[i]=t[i])},n.prototype.addBody=function(t){return this._particles.push(t),t},n.prototype.createParticle=function(t){return this.addBody(new S(t))},n.prototype.createBody=function(t){var i=t.shape||n.BODIES.POINT;return this.addBody(new i(t))},n.prototype.remove=function(t){var i=this._particles.indexOf(t);if(i>-1){for(var e=0;e<Object.keys(this._agents);e++)this.detachFrom(e,t);this._particles.splice(i,1)}},n.prototype.attach=function(t,i,e){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],i,e);return n}return o.call(this,t,i,e)},n.prototype.attachTo=function(t,i){h.call(this,t).targets.push(i)},n.prototype.detach=function(t){var i=this.getAgent(t),e=r.call(this,i),n=e.indexOf(t);e.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,i){var e=h.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets,s=n.indexOf(i);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return h.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getParticlesExcept=function(t){var i=[];return this.forEachParticle(function(e){-1===t.indexOf(e)&&i.push(e)}),i},n.prototype.getPos=function(t){return(t||this._particles[0]).getPos()},n.prototype.getVel=function(t){return(t||this._particles[0]).getVel()},n.prototype.getTransform=function(t){return(t||this._particles[0]).getTransform()},n.prototype.setPos=function(t,i){(i||this._particles[0]).setPos(t)},n.prototype.setVel=function(t,i){(i||this._particles[0]).setVel(t)},n.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),n=0,s=e.length;s>n;n++)t.call(this,e[n],i)},n.prototype.step=function(){if(this._playing){this._prevTime||(this._prevTime=s()),this._currTime=s();var t=this._currTime-this._prevTime;this._prevTime=this._currTime,0!=t&&w.call(this,this.opts.speed*this._timestep)}},n.prototype.render=function(t){this.step();var i=[];return this.forEachParticle(function(e){i.push(e.render(t))}),i},n.prototype.play=function(){this._prevTime=s(),this._playing=!0},n.prototype.pause=function(){this._playing=!1},n.prototype.toggle=function(){this._playing?this.pause():this.play()},n.prototype.reverseTime=function(){this.opts.speed*=-1},n.prototype.reverseVelocities=function(){this.forEachParticle(function(t){t.v.mult(-1,t.v)})},e.exports=n}),e("5j/ir",["require","exports","module","5j/is"],function(t,i,e){function n(t){this.opts={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},t&&this.setOpts(t),s.call(this)}var s=t("5j/is");n.prototype=Object.create(s.prototype),n.prototype.constructor=s,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.prototype.applyForce=function(t){var i=this.opts.strength,e=this.opts.forceFunction,n=this.force;for(var s in t){var o=t[s];e(o.v).mult(-i).put(n),o.applyForce(n)}},n.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=n}),e("5j/iu",["require","exports","module","5j/is","5l/i5"],function(t,i,e){function n(t){this.opts={period:300,dampingRatio:.1,length:0,lMin:0,lMax:1/0,anchor:void 0,bodyAnchor:new u(0,0,0),forceFunction:n.FORCE_FUNCTIONS.HOOK,callback:void 0,callbackTolerance:1e-7},t&&this.setOpts(t),this.init(),this._canFireCallback=void 0,a.call(this),this.disp=new u(0,0,0)}function s(t){this.forceFunction=t}function o(t){t.stiffness=Math.pow(2*Math.PI/t.period,2)}function r(t){t.damping=4*Math.PI*t.dampingRatio/t.period}function h(t,i){return.5*t*i*i}var a=t("5j/is"),u=t("5l/i5");n.prototype=Object.create(a.prototype),n.prototype.constructor=a,n.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}},n.prototype.init=function(){var t=this.opts;s.call(this,t.forceFunction),o.call(this,t),r.call(this,t)},n.prototype.applyForce=function(t,i){for(var e=this.force,n=this.disp,s=this.opts,o=s.stiffness,r=s.damping,a=s.length,u=s.anchor||i.p,p=s.callback,c=0;c<t.length;c++){var l=t[c];n.set(u.sub(l.p));var d=n.norm()-a;if(0==d)return;var f=l.m;if(o*=f,r*=f,e.set(n.normalize(o*this.forceFunction(d,this.opts.lMax))),r&&(i?e.add(l.v.sub(i.v).mult(-r),e):e.add(l.v.mult(-r),e)),l.applyForce(e),i&&i.applyForce(e.mult(-1)),this.opts.callback){var v=l.getEnergy()+h(o,d);this.fireCallback(l,p,v)}}},n.prototype.fireCallback=function(t,i,e){e<this.opts.callbackTolerance?(this._canFireCallback&&i.call(this,t),this._canFireCallback=!1):this._canFireCallback=!0},n.prototype.getEnergy=function(t,i){var e=this.opts,n=e.length,s=e.anchor||i.p,o=e.stiffness,r=s.sub(t.p),h=r.norm()-n;return.5*o*h*h},n.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof u&&(this.opts.anchor=t.anchor.p),t.anchor instanceof u&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new u(t.anchor))),void 0!==t.bodyAnchor&&(t.bodyAnchor instanceof u&&(this.opts.bodyAnchor=t.bodyAnchor),t.bodyAnchor instanceof Array&&(this.opts.bodyAnchor=new u(t.bodyAnchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.callback&&(this.opts.callback=t.callback),void 0!==t.callbackTolerance&&(this.opts.callbackTolerance=t.callbackTolerance),this.init()},e.exports=n}),e("5o/ju",["require","exports","module","5e/hh"],function(t,i,e){function n(t){this.selective=t,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",r.bind(this)),this.eventInput.on("touchend",h.bind(this)),this.eventInput.on("touchcancel",h.bind(this)),this.eventInput.on("unpipe",a.bind(this))}function s(t,i,e,n){var s={};for(var o in t)s[o]=t[o];return{touch:s,origin:i,timestamp:Date.now(),count:n,history:e}}function o(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],n=s(e,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",n),this.selective||this.touchHistory[e.identifier]||this.track(n)}}function r(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],n=this.touchHistory[e.identifier];if(n){var o=s(e,t.origin,n,t.touches.length);this.touchHistory[e.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function h(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],n=this.touchHistory[e.identifier];if(n){var o=s(e,t.origin,n,t.touches.length);this.eventOutput.emit("trackend",o),delete this.touchHistory[e.identifier]}}}function a(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}var u=t("5e/hh");n.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},e.exports=n}),e("5o/jt",["require","exports","module","./ju","5e/hh"],function(t,i,e){function n(t,i){this.targetGet=t,this.output=new a,this.touchTracker=new h,this.options={direction:void 0,rails:!1,scale:1},i?this.setOptions(i):this.setOptions(this.options),a.setOutputHandler(this,this.output),a.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",o.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function s(t){this.output.emit("start",{count:t.count,touch:t.touch.identifier})}function o(t){var i=t.history,e=i[i.length-2].timestamp,s=i[i.length-1].timestamp,o=i[i.length-2].touch,r=i[i.length-1].touch,h=r.pageX-o.pageX,a=r.pageY-o.pageY;this.options.rails&&(Math.abs(h)>Math.abs(a)?a=0:h=0);var u=Math.max(s-e,8),p=h/u,c=a/u;if(i.length>2)var l=i[i.length-3].touch,d=(r.pageX-2*o.pageX+l.pageX)/(u*u),f=(r.pageY-2*o.pageY+l.pageY)/(u*u);else var d=0,f=0;var v,y,g,m=this.targetGet(),_=this.options.scale;this.options.direction==n.DIRECTION_X?(v=m+_*h,y=_*p,g=_*c):this.options.direction==n.DIRECTION_Y?(v=m+_*a,y=_*c,g=_*f):(v=[m[0]+_*h,m[1]+_*a],y=[_*p,_*c],g=[_*d,_*f]),this.output.emit("update",{p:v,v:y,a:g,touch:t.touch.identifier})}function r(t){var i=void 0!==this.options.direction?0:[0,0],e=t.history,s=t.count,o=this.targetGet();if(e.length>1){var r=e[e.length-2].timestamp,h=e[e.length-1].timestamp,a=e[e.length-2].touch,u=e[e.length-1].touch,p=u.pageX-a.pageX,c=u.pageY-a.pageY;this.options.rails&&(Math.abs(p)>Math.abs(c)?c=0:p=0);var i,l=Math.max(h-r,1),d=p/l,f=c/l,v=this.options.scale;i=this.options.direction==n.DIRECTION_X?v*d:this.options.direction==n.DIRECTION_Y?v*f:[v*d,v*f]}this.output.emit("end",{p:o,v:i,count:s,touch:t.touch.identifier})}var h=t("./ju"),a=t("5e/hh");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},e.exports=n}),e("5o/js",["require","exports","module","5e/hh","5e/he"],function(t,i,e){function n(t,i){this.targetGet=t,this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},i?this.setOptions(i):this.setOptions(this.options),this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",o.bind(this)),this.input.on("wheel",o.bind(this)),this.inProgress=!1,this._loopBound=!1}function s(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var i=this.targetGet();this.inProgress=!1;var e=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(e=this._prevVel),this.output.emit("end",{p:i,v:e,slip:!0})}}function o(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(h.on("prerender",s.bind(this)),this._loopBound=!0));var i=this._prevTime,e=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(e*=this.options.lineHeight,o*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(e)>Math.abs(o)?o=0:e=0);var a,u,p=Math.max(r-i,8),c=e/p,l=o/p,d=this.targetGet(),f=this.options.scale;this.options.direction==n.DIRECTION_X?(a=d+f*e,u=f*c):this.options.direction==n.DIRECTION_Y?(a=d+f*o,u=f*l):(a=[d[0]+f*e,d[1]+f*o],u=[f*c,f*l]),this.output.emit("update",{p:a,v:u,slip:!0}),this._prevTime=r,this._prevVel=u}var r=t("5e/hh"),h=t("5e/he");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},e.exports=n}),e("5o/jn",["require","exports","module","5e/hh","./jt","./js"],function(t,i,e){function n(t,i){this.targetGet=t,this.eventInput=new o,o.setInputHandler(this,this.eventInput),this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this._handlers=void 0,this.options={syncClasses:a},this._handlerOptions=this.options,i&&this.setOptions(i),this._handlers||s.call(this)}function s(){if(this._handlers)for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);this._handlers=[];for(var t=0;t<this.options.syncClasses.length;t++){var i=this.options.syncClasses[t];this._handlers[t]=new i(this.targetGet,this._handlerOptions),this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput)}}var o=t("5e/hh"),r=t("./jt"),h=t("./js"),a=[r,h];n.register=function(t){a.indexOf(t)<0&&a.push(t)},n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2,n.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,s.call(this)),this._handlers)for(var i=0;i<this._handlers.length;i++)this._handlers[i].setOptions(this._handlerOptions)},e.exports=n}),e("5e/hz",["require","exports","module"],function(t,i,e){function n(t,i,e){this.array=t||[],this.index=i||0,this.loop=e||!1,this._prev=void 0,this._prevIndex=void 0,this._next=void 0,this._nextIndex=void 0}function s(t){for(var i=this.index,e=this;e&&i<this.array.length;)e.index+=t,void 0!==e._prevIndex&&(e._prevIndex+=t),void 0!==e._nextIndex&&(e._nextIndex+=t),e=e._next}n.prototype._createPrevious=function(){var t=new this.constructor(this.array,this._prevIndex,this.loop);return t._next=this,t._nextIndex=this.index,t},n.prototype._createNext=function(){var t=new this.constructor(this.array,this._nextIndex,this.loop);return t._prev=this,t._prevIndex=this.index,t},n.prototype.getPrevious=function(){var t=this.index-1;if(0==this.index){if(!this.loop)return void 0;t=this.array.length-1}return this._prev&&this._prevIndex==t||(this._prevIndex=t,this._prev=this._createPrevious()),this._prev},n.prototype.getNext=function(){var t=this.index+1;if(t>=this.array.length){if(!this.loop)return void 0;t=0}return this._next&&this._nextIndex==t||(this._nextIndex=t,this._next=this._createNext()),this._next},n.prototype.toString=function(){return this.index},n.prototype.unshift=function(){if(this._prev&&0!==this.index)this._prev.unshift.apply(this._prev,arguments);else{var t=arguments.length;this.array.unshift.apply(this.array,arguments),s.call(this,t)}},n.prototype.push=function(){this.array.push.apply(this.array,arguments)},n.prototype.splice=function(t,i){if(this._prev&&this.index!==t)this._prev.splice.apply(this._prev,arguments);else{var e=this.index>=t?arguments.length-2-i:0;this.array.splice.apply(this.array,arguments),e&&s.call(this,e)}},n.prototype.get=function(){return this.array[this.index]},n.prototype.getSize=function(){var t=this.get();if(t)return t.getSize?t.getSize.apply(t,arguments):void 0},n.prototype.render=function(){var t=this.get();if(t)return t.render.apply(t,arguments)},e.exports=n}),e("5e/hs",["require","exports","module","./hf","./hh","./hk"],function(t,i,e){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=void 0,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=void 0,this._opacity=1,this._origin=void 0,this._size=void 0,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new l,this.eventHandler.bindThis(this),this.id=c.register(this),t&&this.setOptions(t),this._currTarget=void 0}function s(t){for(var i in this.eventHandler.listeners)t.addEventListener(i,this.eventForwarder)}function o(t){for(var i in this.eventHandler.listeners)t.removeEventListener(i,this.eventForwarder)}function r(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function h(t){for(var i in this.properties)t.style[i]=this.properties[i]}function a(t){for(var i in this.properties)t.style[i]=""}function u(t,i){return t||i?t&&i?t[0]==i[0]&&t[1]==i[1]:!1:!0}function p(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}var c=t("./hf"),l=t("./hh"),d=t("./hk"),f=void 0!==document.body.style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,i){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,i)},n.prototype.unbind=function(t,i){this.eventHandler.unbind(t,i)},n.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this.eventHandler.emit(t,i);return e&&i.stopPropagation&&i.stopPropagation(),e},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var i=this.classList.indexOf(t);i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){for(var i=[],e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(var e=0;e<i.length;e++)this.removeClass(i[e]);for(var e=0;e<t.length;e++)this.addClass(t[e])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!=t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var v,y,g;v=f?function(t,i){t.style.webkitTransform=d.formatCSS(i)}:function(t,i){t.style.transform=d.formatCSS(i)},y=f?function(t,i){t.style.webkitTransformOrigin=p(i)}:function(t,i){t.style.transformOrigin=p(i)},g=f?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0
},n.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);s.call(this,i),y(i,[0,0]),this._currTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=void 0,this._opacity=void 0,this._origin=void 0,this._size=void 0},n.prototype.commit=function(t,i,e,n,s){this._currTarget||this.setup(t.getAllocator());var o=this._currTarget;if(this.size){var a=s;s=this.size.slice(0),void 0===s[0]&&a[0]&&(s[0]=a[0]),void 0===s[1]&&a[1]&&(s[1]=a[1])}if(u(this._size,s)||(this._size=s.slice(0),this._sizeDirty=!0),!i&&this._matrix)return this._matrix=void 0,this._opacity=0,g(o),void 0;if(this._opacity!==e&&(this._opacity=e,o.style.opacity=Math.min(e,.999999)),!u(this._origin,n)||!d.equals(this._matrix,i)){i||(i=d.identity),n||(n=[0,0]),this._origin=n.slice(0),this._matrix=i;var p=i;n&&(p=d.moveThen([-this._size[0]*n[0],-this._size[1]*n[1]],i)),v(o,p)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,o);for(var c=this.getClassList(),l=0;l<c.length;l++)o.classList.add(c[l]);this._classesDirty=!1}this._stylesDirty&&(h.call(this,o),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(o.style.width=this._size[0]!==!0?this._size[0]+"px":"",o.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(o),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},n.prototype.cleanup=function(t){var i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.width="",i.style.height="",this._size=void 0,a.call(this,i);var e=this.getClassList();r.call(this,i);for(var n=0;n<e.length;n++)i.classList.remove(e[n]);if(this.elementClass)if(this.elementClass instanceof Array)for(var n=0;n<this.elementClass.length;n++)i.classList.remove(this.elementClass[n]);else i.classList.remove(this.elementClass);o.call(this,i),this._currTarget=void 0,t.deallocate(i),g(i)},n.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},n.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?t.slice(0,2):void 0,this._sizeDirty=!0},e.exports=n}),e("5e/hi",["require","exports","module","./hc","./hk","./hs"],function(t,i,e){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0],this._origin=void 0,this._originTransfer={render:function(t){return{origin:this._origin,target:t}}.bind(this)}}var s=t("./hc"),o=t("./hk"),r=t("./hs");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.link=function(){var t=this.context.link(this._originTransfer);return t.link.apply(t,arguments)},n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.mod=function(){return this.context.mod.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t,i,e,s,h){i=o.moveThen([-s[0]*h[0],-s[1]*h[1],0],i);var a=r.prototype.commit.call(this,t,i,e,s,n.SIZE_ZERO);return this._origin=s,(h[0]!=this._groupSize[0]||h[1]!=this._groupSize[1])&&(this.context.setSize(h),this._groupSize[0]=h[0],this._groupSize[1]=h[1]),this.context.update(),a},e.exports=n}),e("5p/kd",["require","exports","module","5e/hw","5n/je","5h/ic","5j/ir","5j/iu","5e/hk","5e/hh","5o/jn","5e/hz","5e/hi","5e/hf"],function(t,i,e){function n(t){this.options={direction:x.Direction.Y,rails:!0,itemSpacing:0,clipSize:void 0,margin:void 0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:1/0,pageSwitchSpeed:1,speedLimit:10},this.node=null,this.physicsEngine=new I,this.particle=new w,this.physicsEngine.addBody(this.particle),this.spring=new b({anchor:[0,0,0]}),this.drag=new S({forceFunction:S.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new S({forceFunction:S.FORCE_FUNCTIONS.LINEAR}),this.sync=new M(function(){return-this.getPosition()}.bind(this),{direction:this.options.direction==x.Direction.X?M.DIRECTION_X:M.DIRECTION_Y}),this.eventInput=new z,this.eventOutput=new z,this.rawInput=new z,this.rawInput.pipe(this.sync),this.sync.pipe(this.eventInput),this.sync.pipe(this.eventOutput),this.rawInput.pipe(this.eventInput),z.setInputHandler(this,this.rawInput),z.setOutputHandler(this,this.eventOutput),this._outputFunction=void 0,this._masterOutputFunction=void 0,this.setOutputFunction(),this.touchCount=0,this._springAttached=!1,this._onEdge=0,this._springPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._masterOffset=0,this._lastFrameNode=void 0,t?this.setOptions(t):this.setOptions({}),h.call(this),this.group=new C,this.group.link({render:_.bind(this)}),this._entityId=E.register(this),this._contextSize=[window.innerWidth,window.innerHeight],this._offsets={}}function s(t){this.touchCount=t.count,void 0===t.count&&(this.touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var i=-t.p,e=-t.v;this._onEdge&&t.slip&&(0>e&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.particle.getVel()[0])&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(i))}function r(t){if(this.touchCount=t.count||0,!this.touchCount){u.call(this),this._onEdge&&(this._springAttached=!0),a.call(this);var i=-t.v,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=void 0}}function h(){this.eventInput.on("start",s.bind(this)),this.eventInput.on("update",o.bind(this)),this.eventInput.on("end",r.bind(this))}function a(){this._springAttached?this.physicsEngine.attach([this.spring],this.particle):this.physicsEngine.attach([this.drag,this.friction],this.particle)}function u(){this._springAttached=!1,this.physicsEngine.detachAll()}function p(t){t||(t=this._contextSize);var i=this.options.direction===x.Direction.X?0:1;return t[i]||this._contextSize[i]}function c(t){this._springPosition+=t,this.setPosition(this.getPosition()+t),this.spring.setOpts({anchor:[this._springPosition,0,0]})}function l(){for(var t=!1;!t&&this.getPosition()<0;){var i=this.node.getPrevious?this.node.getPrevious():void 0;if(i){var e=i.getSize?i.getSize():this._contextSize,n=p.call(this,e)+this.options.itemSpacing;c.call(this,n),this._masterOffset-=n,this.node=i}else t=!0}for(var s=this.node&&this.node.getSize?this.node.getSize():this._contextSize;!t&&this.getPosition()>=p.call(this,s)+this.options.itemSpacing;){var o=this.node.getNext?this.node.getNext():void 0;if(o){var n=p.call(this,s)+this.options.itemSpacing;c.call(this,-n),this._masterOffset+=n,this.node=o,s=this.node.getSize?this.node.getSize():this._contextSize}else t=!0}Math.abs(this._masterOffset)>m.call(this)+this.options.margin&&(this._masterOffset=0)}function d(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this.touchCount||this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springAttached&&Math.abs(this.getVelocity())<.001&&(this.setVelocity(0),this.setPosition(this._springPosition),u.call(this),a.call(this))),this._onEdge=t}function f(){if(0==this.touchCount&&!this._springAttached&&!this._onEdge&&this.options.paginated&&Math.abs(this.getVelocity())<this.options.pageStopSpeed){var t=this.node.getSize?this.node.getSize():this._contextSize,i=Math.abs(this.getVelocity())>this.options.pageSwitchSpeed,e=this.getVelocity()>0,n=this.getPosition()>.5*p.call(this,t);i&&e||!i&&n?this.goToNextPage():v.call(this)}}function v(){y.call(this,0,{period:this.options.pagePeriod,damp:this.options.pageDamp}),this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))}function y(t,i){i||(i={period:this.options.edgePeriod,damp:this.options.edgeDamp}),this._springPosition=t,this.spring.setOpts({anchor:[this._springPosition,0,0],period:i.period,dampingRatio:i.damp})}function g(t,i,e){var n=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(i);return e.push({transform:s,target:t.render()}),p.call(this,n)}function m(){return this.options.clipSize?this.options.clipSize:p.call(this,this._contextSize)}function _(){var t={},i=this.getPosition(),e=[],n=0,s=0,o=this.node;for(t[o]=0;o&&s-i<m.call(this)+this.options.margin;)s+=g.call(this,o,s+this._masterOffset,e)+this.options.itemSpacing,o=o.getNext?o.getNext():void 0,t[o]=s,!o&&s-i-this.options.itemSpacing<=m.call(this)&&(this._onEdge||y.call(this,s-m.call(this)-this.options.itemSpacing),n=1);if(o=this.node&&this.node.getPrevious?this.node.getPrevious():void 0,s=0,o){var r=o.getSize?o.getSize():this._contextSize;s-=p.call(this,r)+this.options.itemSpacing}else 0>=i&&(this._onEdge||y.call(this,0),n=-1);for(;o&&s-i>-(m.call(this)+this.options.margin);)if(t[o]=s,g.call(this,o,s+this._masterOffset,e),o=o.getPrevious?o.getPrevious():void 0){var r=o.getSize?o.getSize():this._contextSize;s-=p.call(this,r)+this.options.itemSpacing}return this._offsets=t,d.call(this,n),f.call(this),this.options.paginated&&this._lastFrameNode!==this.node&&(this.eventOutput.emit("pageChange"),this._lastFrameNode=this.node),e}var x=t("5e/hw"),I=t("5n/je"),w=t("5h/ic"),S=t("5j/ir"),b=t("5j/iu"),O=t("5e/hk"),z=t("5e/hh"),M=t("5o/jn"),T=t("5e/hz"),C=t("5e/hi"),E=t("5e/hf");n.prototype.getPosition=function(t){var i=this.particle.getPos()[0];if(void 0===t)return i;var e=this._offsets[t];return void 0!==e?i-e:void 0},n.prototype.setPosition=function(t){this.particle.setPos([t,0,0])},n.prototype.getVelocity=function(){return this.touchCount?this._touchVelocity:this.particle.getVel()[0]},n.prototype.setVelocity=function(t){this.particle.setVel([t,0,0])},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction,"x"===this.options.direction?this.options.direction=x.Direction.X:"y"===this.options.direction&&(this.options.direction=x.Direction.Y)),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.itemSpacing&&(this.options.itemSpacing=t.itemSpacing),void 0!==t.clipSize&&(t.clipSize!==this.options.clipSize&&(this._onEdge=0),this.options.clipSize=t.clipSize),void 0!==t.margin&&(this.options.margin=t.margin),void 0!==t.drag&&(this.options.drag=t.drag),void 0!==t.friction&&(this.options.friction=t.friction),void 0!==t.edgeGrip&&(this.options.edgeGrip=t.edgeGrip),void 0!==t.edgePeriod&&(this.options.edgePeriod=t.edgePeriod),void 0!==t.edgeDamp&&(this.options.edgeDamp=t.edgeDamp),void 0!==t.paginated&&(this.options.paginated=t.paginated),void 0!==t.pageStopSpeed&&(this.options.pageStopSpeed=t.pageStopSpeed),void 0!==t.pageSwitchSpeed&&(this.options.pageSwitchSpeed=t.pageSwitchSpeed),void 0!==t.pagePeriod&&(this.options.pagePeriod=t.pagePeriod),void 0!==t.pageDamp&&(this.options.pageDamp=t.pageDamp),void 0!==t.speedLimit&&(this.options.speedLimit=t.speedLimit),void 0===this.options.margin&&(this.options.margin=.5*Math.max(window.innerWidth,window.innerHeight)),this.drag.setOpts({strength:this.options.drag}),this.friction.setOpts({strength:this.options.friction}),this.spring.setOpts({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction==x.Direction.X?M.DIRECTION_X:M.DIRECTION_Y})},n.prototype.setOutputFunction=function(t,i){t||(t=function(t){return this.options.direction==x.Direction.X?O.translate(t,0):O.translate(0,t)}.bind(this),i=t),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return O.inverse(t(-i))}},n.prototype.goToPreviousPage=function(){if(this.node){var t=this.node.getPrevious?this.node.getPrevious():void 0;if(t){var i=p.call(this,this.node.getSize())+this.options.itemSpacing;this.setPosition(this.getPosition()+i),this.node=t;for(var e in this._offsets)this._offsets[e]+=i;v.call(this)}return t}},n.prototype.goToNextPage=function(){if(this.node){var t=this.node.getNext?this.node.getNext():void 0;if(t){var i=p.call(this,this.node.getSize())+this.options.itemSpacing;this.setPosition(this.getPosition()-i),this.node=t;for(var e in this._offsets)this._offsets[e]-=i;v.call(this)}return t}},n.prototype.getCurrentNode=function(){return this.node},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new T(t)),this.node=t,this._lastFrameNode=t},n.prototype.getSize=function(){return this.options.direction==x.Direction.X?[m.call(this),void 0]:[void 0,m.call(this)]},n.prototype.render=function(){return this.node?(this.physicsEngine.step(),this._entityId):void 0},n.prototype.commit=function(t,i,e,n,s){this.options.clipSize||s[0]==this._contextSize[0]&&s[1]==this._contextSize[1]||(this._onEdge=0,this._contextSize=s),l.call(this);var o=this.getPosition(),r=this._masterOutputFunction(-(o+this._masterOffset));return{transform:O.moveThen([-n[0]*s[0],-n[1]*s[1],0],i),opacity:e,origin:n,size:s,target:{transform:r,origin:n,target:this.group.render()}}},e.exports=n}),e("5e/hl",["require","exports","module","./hk","./hu","./hw"],function(t,i,e){function n(t){var i=s.identity,e=1,n=void 0,r=void 0;arguments.length>1||arguments[0]instanceof Array?(void 0!==arguments[0]&&(i=arguments[0]),void 0!==arguments[1]&&(e=arguments[1]),n=arguments[2],r=arguments[3]):t&&(t.transform&&(i=t.transform),void 0!==t.opacity&&(e=t.opacity),t.origin&&(n=t.origin),t.size&&(r=t.size)),this.transformTranslateState=new o([0,0,0]),this.transformRotateState=new o([0,0,0]),this.transformSkewState=new o([0,0,0]),this.transformScaleState=new o([1,1,1]),this.opacityState=new o(e),this.originState=new o([0,0]),this.sizeState=new o([0,0]),this._originEnabled=!1,this._sizeEnabled=!1,this.setTransform(i),this.setOpacity(e),this.setOrigin(n),this.setSize(r)}var s=t("./hk"),o=t("./hu"),r=t("./hw");n.prototype.getTransform=function(){return this.isActive()?s.build({translate:this.transformTranslateState.get(),rotate:this.transformRotateState.get(),skew:this.transformSkewState.get(),scale:this.transformScaleState.get()}):this.getFinalTransform()},n.prototype.getFinalTransform=function(){return this._finalTransform},n.prototype.setTransform=function(t,i,e){var n=e?r.after(4,e):void 0;if(i){if(this._transformDirty){var o=s.interpret(this.getFinalTransform());this.transformTranslateState.set(o.translate),this.transformRotateState.set(o.rotate),this.transformSkewState.set(o.skew),this.transformScaleState.set(o.scale),this._transformDirty=!1}var h=s.interpret(t);this.transformTranslateState.set(h.translate,i,n),this.transformRotateState.set(h.rotate,i,n),this.transformSkewState.set(h.skew,i,n),this.transformScaleState.set(h.scale,i,n)}else this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this._transformDirty=!0;this._finalTransform=t},n.prototype.getOpacity=function(){return this.opacityState.get()},n.prototype.setOpacity=function(t,i,e){this.opacityState.set(t,i,e)},n.prototype.getOrigin=function(){return this._originEnabled?this.originState.get():void 0},n.prototype.setOrigin=function(t,i,e){this._originEnabled=!!t,t||(t=[0,0]),t instanceof Array||(t=r.origins[t]),this.originState.set(t,i,e)},n.prototype.getSize=function(){return this._sizeEnabled?this.sizeState.get():void 0},n.prototype.setSize=function(t,i,e){this._sizeEnabled=!!t,t||(t=[0,0]),this.sizeState.set(t,i,e)},n.prototype.setDefaultTransition=function(t){this.transformTranslateState.setDefault(t),this.transformRotateState.setDefault(t),this.transformSkewState.setDefault(t),this.transformScaleState.setDefault(t),this.opacityState.setDefault(t),this.originState.setDefault(t),this.sizeState.setDefault(t)},n.prototype.halt=function(){this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this.opacityState.halt(),this.originState.halt(),this.sizeState.halt()},n.prototype.isActive=function(){return this.transformTranslateState.isActive()||this.transformRotateState.isActive()||this.transformSkewState.isActive()||this.transformScaleState.isActive()},n.prototype.render=function(t){return{transform:this.getTransform(),opacity:this.getOpacity(),origin:this.getOrigin(),size:this.getSize(),target:t}},e.exports=n}),e("5o/jv",["require","exports","module","5e/hh"],function(t,i,e){function n(t,i){this.targetGet=t,this.options={scale:1},i?this.setOptions(i):this.setOptions(this.options),this.input=new s,this.output=new s,s.setInputHandler(this,this.input),s.setOutputHandler(this,this.output),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this))}var s=t("5e/hh");n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAEnabled?this.touchBEnabled||(this.touchBId=e.identifier,this.touchBEnabled=!0,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),this._startUpdate()):(this.touchAId=e.identifier,this.touchAEnabled=!0,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},n.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var i,e=this.timestampA,n=this.timestampB,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];o.identifier===this.touchAId?(this.posA=[o.pageX,o.pageY],this.timestampA=Date.now(),i=this.timestampA-e):o.identifier===this.touchBId&&(this.posB=[o.pageX,o.pageY],this.timestampB=Date.now(),i=this.timestampB-n)}i&&this._moveUpdate(i)}},n.prototype.handleEnd=function(t){for(var i=this.targetGet(),e=this.options.scale,n=0;n<t.changedTouches.length;n++){var s=t.changedTouches[n];(s.identifier===this.touchAId||s.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this.output.emit("end",{p:i,v:e*this._vel,touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},e.exports=n}),e("5o/jp",["require","exports","module","./jv"],function(t,i,e){function n(t,i){o.call(this,t,i),this._dist=void 0}function s(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)}var o=t("./jv");n.prototype=Object.create(o.prototype),n.prototype._startUpdate=function(){this._dist=s(this.posA,this.posB),this._vel=0,this.output.emit("start",{count:event.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist})},n.prototype._moveUpdate=function(t){var i=s(this.posA,this.posB),e=i-this._dist,n=e/t,o=this.targetGet(),r=this.options.scale;this.output.emit("update",{p:o+r*e,v:r*n,touches:[this.touchAId,this.touchBId],distance:i}),this._dist=i,this._vel=n},e.exports=n}),e("5o/jq",["require","exports","module","./jv"],function(t,i,e){function n(t,i){o.call(this,t,i),this._angle=void 0}function s(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.atan2(n,e)}var o=t("./jv");n.prototype=Object.create(o.prototype),n.prototype._startUpdate=function(){this._angle=s(this.posA,this.posB),this._vel=0,this.output.emit("start",{count:event.touches.length,touches:[this.touchAId,this.touchBId],angle:this._angle})},n.prototype._moveUpdate=function(t){var i=s(this.posA,this.posB),e=i-this._angle,n=e/t,o=this.targetGet(),r=this.options.scale;this.output.emit("update",{p:o+r*e,v:r*n,touches:[this.touchAId,this.touchBId],angle:i}),this._angle=i,this._vel=n},e.exports=n}),e("main",["require","exports","module","5e/he","5p/kd","5e/hs","5e/hl","5e/hk","5e/hh","5e/hz","5o/jp","5o/jq"],function(t){var i=t("5e/he"),e=t("5p/kd"),n=t("5e/hs"),s=t("5e/hl"),o=t("5e/hk");t("5e/hh");var r=t("5e/hz"),h=t("5o/jp"),a=t("5o/jq"),u=i.createContext(),p=.8*window.innerWidth,c=Math.round(window.innerHeight/5),l=.5*window.innerHeight,d=100,f=0,v=new e({direction:"y",paginated:!1,margin:8*l*Math.PI,clipSize:0}),y=function(t){var i=t*Math.sin(f);if(100==d)return o.translate(i,t,0);var e=100/(100-d)*l,n=2*Math.asin(.5*c/e)/c;return o.move(o.aboutOrigin([0,0,e],o.rotateX(n*t)),[i,0,0])},g=function(t){skewAmount=Math.atan(Math.sin(f));var i=o.skew(0,0,skewAmount);return o.multiply(y(t),i)};v.setOutputFunction(g),i.pipe(v);for(var m=[],_=0;720>_;_++){var x=new n({size:[p,c],content:"Panel "+_});x.setProperties({color:"hsl("+(""+_)+", 50%, 70%)",fontSize:Math.round(.5*c)+"px",backgroundColor:"hsla("+(""+_)+", 50%, 50%, 0.8)",lineHeight:c+"px"}),m[_]=x}var I=new h(function(){return d},{scale:-1});i.pipe(I);var w=new a(function(){return f},{scale:-1});i.pipe(w),I.on("update",function(t){d=Math.max(1,Math.min(t.p,200))}),w.on("update",function(t){f=Math.max(-Math.PI/2,Math.min(t.p,Math.PI/2))}),v.sequenceFrom(new r(m,0,!0)),u.link(new s({origin:[.5,.5]})).link(v),u.setPerspective(300)}),i(["main"])}();